"use strict";var __decorate=this&&this.__decorate||function(e,t,s,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(o<3?r(a):o>3?r(t,s,a):r(t,s))||a);return o>3&&a&&Object.defineProperty(t,s,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),sim_service_1=require("../services/sim-service"),angularfire2_1=require("angularfire2");require("rxjs/add/operator/take");var todo_service_1=require("../../todo/services/todo-service"),router_1=require("@angular/router"),SimCmp=function(){function e(e,t,s,i){var r=this;this.af=e,this.todoService=t,this.router=s,this.simService=i,this.title="NAbs",this.selectedUser=null,this.selectedImage=null,this.allResults=null,this.selectedUserEvents=null,this.alertParams=null,this.selectedNotification=null,this.selectedNotificationEvents=null,this.selectedResult=null,this.alertSenderInputValues=["NIP","NIP","NIP","NIP","NIP","NIP","NIP","NIP","NIP","IMPORTANT","IMPORTANT","IMPORTANT","IMPORTANT","IMPORTANT","IMPORTANT","IMPORTANT","IMPORTANT","IMPORTANT","VIP","VIP","VIP","VIP","VIP","VIP","VIP","VIP","VIP"],this.alertSubjectInputValues=["NIP","NIP","NIP","IMPORTANT","IMPORTANT","IMPORTANT","VIP","VIP","VIP","NIP","NIP","NIP","IMPORTANT","IMPORTANT","IMPORTANT","VIP","VIP","VIP","NIP","NIP","NIP","IMPORTANT","IMPORTANT","IMPORTANT","VIP","VIP","VIP"],this.alertAppInputValues=["NIP","IMPORTANT","VIP","NIP","IMPORTANT","VIP","NIP","IMPORTANT","VIP","NIP","IMPORTANT","VIP","NIP","IMPORTANT","VIP","NIP","IMPORTANT","VIP","NIP","IMPORTANT","VIP","NIP","IMPORTANT","VIP","NIP","IMPORTANT","VIP"],this.alertOptions=["NOW","VERYSOON","SOON","LATER","MUCHLATER"],this.defaultParams=null,this.subscriptionOne=this.todoService.selectedUser$.subscribe(function(e){r.selectedUser=e,console.log("sel user")}),this.subscriptionTwo=this.todoService.selectedImage$.subscribe(function(e){r.selectedImage=e,console.log("sel image"),console.log(r.selectedImage)})}return e.prototype.ngOnInit=function(){var e=this;console.log("init"),null==this.selectedUser?this.router.navigate(["../"]):this.simService.getDefaultAlertParams().subscribe(function(t){e.alertParams=t,e.simService.getDefaultAlertParams().subscribe(function(t){e.defaultParams=t,e.fireAllParams()})})},e.prototype.switchUser=function(){this.router.navigate(["../"])},e.prototype.notificationSelected=function(e){this.selectedNotification=e},e.prototype.fireAllParams=function(){var e=this;this.simService.getResultWithAlertParams(this.selectedUser.id,this.alertParams).subscribe(function(t){e.allResults=t})},e.prototype.setNotification=function(e,t){this.selectedNotification=e,this.selectedResult=t,this.getNotificationEvents()},e.prototype.trackByIndex=function(e,t){return e},e.prototype.checkAlertParams=function(){console.log("Custom: "),console.log(this.alertParams),console.log("Default: "),console.log(this.defaultParams)},e.prototype.getNotificationEvents=function(){var e=this;this.simService.getNotificationEvents(this.selectedUser.id,this.selectedNotification.date).subscribe(function(t){e.selectedNotificationEvents=t})},e.prototype.resetParams=function(){var e=this;this.simService.getDefaultAlertParams().subscribe(function(t){e.alertParams=t})},e.prototype.checkCustomRules=function(){for(var e=0;e<this.alertParams.length;e++)if(this.alertParams[e]!=this.defaultParams[e])return!0;return!1},e}();SimCmp=__decorate([core_1.Component({selector:"sim-cmp",templateUrl:"sim/templates/sim.html",styleUrls:["sim/styles/sim.css","sim/styles/timeline.css"]}),__metadata("design:paramtypes",[angularfire2_1.AngularFire,todo_service_1.TodoService,router_1.Router,sim_service_1.SimService])],SimCmp),exports.SimCmp=SimCmp;